<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- ========================================= -->
    <!-- OPERACIONES DIARIAS                      -->
    <!-- ========================================= -->
    
    <!-- Dashboard -->
    <record id="action_mobile_repair_dashboard" model="ir.actions.act_window">
        <field name="name">Información General</field>
        <field name="res_model">mobile.repair.dashboard</field>
        <field name="view_mode">form</field>
        <field name="view_id" ref="mobile_repair_dashboard_view_simple"/>
        <field name="target">current</field>
        <field name="context">{}</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                ¡Bienvenido al Dashboard de Reparaciones!
            </p>
            <p>
                Aquí puedes ver un resumen de todas las órdenes de reparación.
            </p>
        </field>
    </record>

    <!-- Vista General de Órdenes -->
    <record id="action_repair_order_main" model="ir.actions.act_window">
        <field name="name">Órdenes de Reparación</field>
        <field name="res_model">mobile.repair.order</field>
        <field name="view_mode">kanban,list,form,graph,pivot</field>
        <field name="context">{'search_default_group_by_status': 1}</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                Crear una nueva orden de reparación
            </p>
            <p>
                Gestiona las órdenes de reparación de dispositivos móviles.
            </p>
        </field>
    </record>

    <!-- ========================================= -->
    <!-- GESTIÓN DE ÓRDENES                       -->
    <!-- ========================================= -->
    
    <!-- Órdenes por Estado -->
    <record id="action_mobile_repair_order_draft" model="ir.actions.act_window">
        <field name="name">Borradores</field>
        <field name="res_model">mobile.repair.order</field>
        <field name="view_mode">kanban,list,form</field>
        <field name="domain">[('status', '=', 'draft')]</field>
        <field name="context">{'default_status': 'draft'}</field>
    </record>

    <record id="action_mobile_repair_order_progress" model="ir.actions.act_window">
        <field name="name">En Proceso</field>
        <field name="res_model">mobile.repair.order</field>
        <field name="view_mode">kanban,list,form</field>
        <field name="domain">[('status', '=', 'in_progress')]</field>
        <field name="context">{'default_status': 'in_progress'}</field>
    </record>

    <record id="action_mobile_repair_order_completed" model="ir.actions.act_window">
        <field name="name">Completadas</field>
        <field name="res_model">mobile.repair.order</field>
        <field name="view_mode">kanban,list,form</field>
        <field name="domain">[('status', '=', 'completed')]</field>
        <field name="context">{'default_status': 'completed'}</field>
    </record>

    <record id="action_mobile_repair_order_delivered" model="ir.actions.act_window">
        <field name="name">Entregadas</field>
        <field name="res_model">mobile.repair.order</field>
        <field name="view_mode">kanban,list,form</field>
        <field name="domain">[('status', '=', 'delivered')]</field>
        <field name="context">{'default_status': 'delivered'}</field>
    </record>

    <record id="action_mobile_repair_order_canceled" model="ir.actions.act_window">
        <field name="name">Canceladas</field>
        <field name="res_model">mobile.repair.order</field>
        <field name="view_mode">list,form</field>
        <field name="domain">[('status', '=', 'canceled')]</field>
        <field name="context">{'default_status': 'canceled'}</field>
    </record>

    <!-- Vistas Especiales -->
    <record id="action_mobile_repair_order_urgent" model="ir.actions.act_window">
        <field name="name">Urgentes</field>
        <field name="res_model">mobile.repair.order</field>
        <field name="view_mode">kanban,list,form</field>
        <field name="domain">[('priority', '=', 'urgent'), ('status', 'not in', ['delivered', 'canceled'])]</field>
        <field name="context">{'default_priority': 'urgent'}</field>
    </record>

    <record id="action_mobile_repair_order_overdue" model="ir.actions.act_window">
        <field name="name">Vencidas</field>
        <field name="res_model">mobile.repair.order</field>
        <field name="view_mode">list,form</field>
        <field name="domain">[('repair_date', '&lt;', (context_today() - datetime.timedelta(days=7)).strftime('%Y-%m-%d')), ('status', 'not in', ['completed', 'delivered', 'canceled'])]</field>
    </record>

    <record id="action_mobile_repair_order_this_week" model="ir.actions.act_window">
        <field name="name">Esta Semana</field>
        <field name="res_model">mobile.repair.order</field>
        <field name="view_mode">kanban,list,form</field>
        <field name="domain">[('repair_date', '&gt;=', (context_today() - datetime.timedelta(days=7)).strftime('%Y-%m-%d'))]</field>
    </record>

    <!-- ========================================= -->
    <!-- REPORTES                                 -->
    <!-- ========================================= -->
    
    <record id="action_repair_analytics" model="ir.actions.act_window">
        <field name="name">Análisis</field>
        <field name="res_model">mobile.repair.order</field>
        <field name="view_mode">graph,pivot</field>
        <field name="context">{
            'search_default_group_by_status': 1,
            'search_default_group_by_technician': 1
        }</field>
    </record>

    <!-- ========================================= -->
    <!-- CONFIGURACIÓN                            -->
    <!-- ========================================= -->
    
    <!-- Ajustes Generales -->
    <record id="action_repair_settings" model="ir.actions.act_window">
        <field name="name">Ajustes Generales</field>
        <field name="res_model">mobile.repair.config.settings</field>
        <field name="view_mode">form</field>
        <field name="target">inline</field>
    </record>

    <!-- ========================================= -->
    <!-- IDs ÚNICOS PARA EVITAR CONFLICTOS        -->
    <!-- ========================================= -->

    <!-- Gestión de Equipos con IDs únicos -->
    <record id="action_mobile_repair_brand" model="ir.actions.act_window">
        <field name="name">Marcas de Dispositivos</field>
        <field name="res_model">mobile.brand</field>
        <field name="view_mode">list,form</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                Crear una nueva marca
            </p>
            <p>
                Configure las marcas de dispositivos móviles que maneja su taller.
            </p>
        </field>
    </record>

    <record id="action_mobile_repair_model" model="ir.actions.act_window">
        <field name="name">Modelos de Dispositivos</field>
        <field name="res_model">mobile.model</field>
        <field name="view_mode">list,form</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                Crear un nuevo modelo
            </p>
            <p>
                Configure los modelos específicos de cada marca.
            </p>
        </field>
    </record>

    <record id="action_mobile_repair_device_condition" model="ir.actions.act_window">
        <field name="name">Condiciones de Dispositivos</field>
        <field name="res_model">mobile.device.condition</field>
        <field name="view_mode">list,form</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                Crear una nueva condición
            </p>
            <p>
                Define las condiciones en las que pueden encontrarse los dispositivos.
            </p>
        </field>
    </record>

    <!-- Diagnósticos con IDs únicos -->
    <record id="action_mobile_repair_failure_category" model="ir.actions.act_window">
        <field name="name">Categorías de Fallas</field>
        <field name="res_model">mobile.fault.category</field>
        <field name="view_mode">list,form</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                Crear una nueva categoría de fallas
            </p>
            <p>
                Organiza las fallas en categorías para una mejor gestión.
            </p>
        </field>
    </record>

    <record id="action_mobile_repair_failure_type" model="ir.actions.act_window">
        <field name="name">Tipos de Fallas</field>
        <field name="res_model">mobile.fault</field>
        <field name="view_mode">list,form</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                Crear un nuevo tipo de falla
            </p>
            <p>
                Registra los diferentes tipos de fallas que pueden ocurrir en los dispositivos.
            </p>
        </field>
    </record>

</odoo>